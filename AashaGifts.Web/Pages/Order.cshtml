@page "{id:int}"
@model AashaGifts.Web.Pages.OrderModel
@{
    ViewData["Title"] = "Order";
}

<h2>Order: @Model.Product?.Name</h2>

@if (Model.Product == null)
{
    <div class="alert alert-danger">Product not found.</div>
}
else
{
    @if (Model.Product.Images.Any())
    {
        <div id="carouselOrder@Model.Product.Id" class="carousel slide mb-3" data-bs-ride="carousel">
            <div class="carousel-inner">
                @for (int i = 0; i < Model.Product.Images.Count; i++)
                {
                    var img = Model.Product.Images.ElementAt(i);
                    <div class="carousel-item @(i == 0 ? "active" : "")">
                        <img src="@img.ImageUrl" class="d-block w-100 img-fluid" alt="Product image" />
                    </div>
                }
            </div>
            <button class="carousel-control-prev" type="button" data-bs-target="#carouselOrder@Model.Product.Id" data-bs-slide="prev">
                <span class="carousel-control-prev-icon"></span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#carouselOrder@Model.Product.Id" data-bs-slide="next">
                <span class="carousel-control-next-icon"></span>
            </button>
        </div>
    }
    <form method="post" enctype="multipart/form-data" class="mb-3">
        <div class="mb-3">
            <label asp-for="OrderInput.CustomerName" class="form-label"></label>
            <input asp-for="OrderInput.CustomerName" class="form-control" required />
            <span asp-validation-for="OrderInput.CustomerName" class="text-danger"></span>
        </div>
        <div class="mb-3">
            <label asp-for="OrderInput.Email" class="form-label"></label>
            <input asp-for="OrderInput.Email" class="form-control" type="email" required />
            <span asp-validation-for="OrderInput.Email" class="text-danger"></span>
        </div>
        <div class="mb-3">
            <label asp-for="Photo" class="form-label">Photo to Print</label>
            <input asp-for="Photo" class="form-control" type="file" accept="image/*" required />
            <span asp-validation-for="Photo" class="text-danger"></span>
        </div>
        <button type="submit" class="btn btn-success">Place Order</button>
    </form>
    <div class="alert alert-info">
        <b>Payment:</b> Razorpay integration coming soon.
    </div>
}